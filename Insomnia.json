{"_type":"export","__export_format":4,"__export_date":"2023-02-23T08:09:38.279Z","__export_source":"insomnia.desktop.app:v2022.7.5","resources":[{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690d23dd4fd","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf690dbd79b31","modified":1677077198864,"created":1677063130076,"url":"{{ base_url }}/shift/","name":"Create a new shift (requires manager role)","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"from\": \"2023-02-22T10:52:10.027Z\",\n  \"to\": \"2023-02-22T10:52:10.027Z\",\n  \"requiredStaff\": 0\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":"Bearer"},"metaSortKey":-1677063130076,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_6cdb1428addb45259cabbb76310bf690dbd79b31","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130086,"created":1677063130086,"name":"shift","description":"Work shift management","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1677063130086,"_type":"request_group"},{"_id":"wrk_6cdb1428addb45259cabbb76310bf690","parentId":null,"modified":1677063130102,"created":1676021235491,"name":"Mozi vizsgaremek 0.0.1","description":"Karsza Levente, Klement Szabolcs, Papp Dávid","scope":"design","_type":"workspace"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6903b340ba4","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf690dbd79b31","modified":1677063130072,"created":1677063130072,"url":"{{ base_url }}/shift/{{ id }}","name":"Delete specified shift (requires manager role)","description":"","method":"DELETE","body":{},"parameters":[{"name":"id","disabled":false,"value":"string"}],"headers":[],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1677063130072,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6908f2d17d2","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf690dbd79b31","modified":1677064751201,"created":1677063130069,"url":"{{ base_url }}/shift/filter","name":"Get all shifts satisfying the given conditions","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"from\": \"2023-01-01\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":"Bearer"},"metaSortKey":-1677063130069,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690439f2cdf1","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69071125121","modified":1677063130049,"created":1676384987817,"url":"{{ base_url }}/auth/totp","name":"Start TOTP onboarding","description":"","method":"POST","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987817,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_6cdb1428addb45259cabbb76310bf69071125121","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130088,"created":1676384987878,"name":"totp","description":"TOTP Second factor","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1676384987878,"_type":"request_group"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690700708301","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69071125121","modified":1677063130043,"created":1676384987805,"url":"{{ base_url }}/auth/totp","name":"Complete TOTP onboarding","description":"","method":"PUT","body":{"mimeType":"application/json","text":"{\n  \"password\": \"string\",\n  \"totp\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987805,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690f3de71b71","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69071125121","modified":1677063130037,"created":1676384987790,"url":"{{ base_url }}/auth/totp","name":"Disable TOTP two-factor authentication","description":"","method":"DELETE","body":{"mimeType":"application/json","text":"{\n  \"password\": \"string\",\n  \"totp\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987790,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6905af80e6e","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf690a94a8fe5","modified":1677063130079,"created":1676021277051,"url":"{{ base_url }}/","name":"Test endpoint","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1675893433999.75,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_6cdb1428addb45259cabbb76310bf690a94a8fe5","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130082,"created":1676292773263,"name":"test","description":"Testing","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1676292773263,"_type":"request_group"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6906df53fa3","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063130054,"created":1677063130054,"url":"{{ base_url }}/auth/password","name":"Change password","description":"","method":"PUT","body":{"mimeType":"application/json","text":"{\n  \"oldPassword\": \"string\",\n  \"newPassword\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1677063130055,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130091,"created":1676021277055,"name":"auth","description":"Authentication","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1676021277055,"_type":"request_group"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690dc9e4d29","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063130034,"created":1677063130034,"url":"{{ base_url }}/auth/","name":"Delete authenticated (current) user","description":"","method":"DELETE","body":{"mimeType":"application/json","text":"{\n  \"password\": \"string\",\n  \"totp\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1677063130034,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690439f2cdf","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063130052,"created":1676384987850,"url":"{{ base_url }}/auth/totp","name":"Start TOTP onboarding","description":"","method":"POST","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987850,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf69070070830","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063130046,"created":1676384987810,"url":"{{ base_url }}/auth/totp","name":"Complete TOTP onboarding","description":"","method":"PUT","body":{"mimeType":"application/json","text":"{\n  \"password\": \"string\",\n  \"totp\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987810,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf690f3de71b7","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063130040,"created":1676384987799,"url":"{{ base_url }}/auth/totp","name":"Disable TOTP two-factor authentication","description":"","method":"DELETE","body":{"mimeType":"application/json","text":"{\n  \"password\": \"string\",\n  \"totp\": \"string\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{bearerToken}}","prefix":""},"metaSortKey":-1676384987799,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6905311e4d7","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063545920,"created":1676289500120,"url":"{{ base_url }}/auth/refresh","name":"Issue a new access token (valid user)","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"refreshToken\": \"{% response 'body', 'req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0', 'b64::JC5yZWZyZXNoVG9rZW4=::46b', 'always', 280 %}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{},"metaSortKey":-1676289500120,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063218569,"created":1676277506664,"url":"{{ base_url }}/auth/login","name":"Log into a valid account","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"username\": \"{{ _.testUser.username }}\",\n  \"password\": \"{{ _.testUser.password }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{},"metaSortKey":-1676277506664,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_541b83633c234ba28aca1f7f2c49a273","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676293651383,"created":1676277893689,"url":"{{ base_url }}/auth/login","name":"Log in to an invalid account (wrong username)","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"username\": \"{{ _.invalidUser.username }}\",\n  \"password\": \"{{ _.invalidUser.password }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_3e1a892f10354ebaa91379fcb347d15f"}],"authentication":{},"metaSortKey":-1676149391857.5,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_ffc8bc2c57cd4dd7b57354e7473444fc","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676293665028,"created":1676278655870,"url":"{{ base_url }}/auth/login","name":"Log in to an invalid account (wrong password)","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"username\": \"{{ _.testUser.username }}\",\n  \"password\": \"{{ _.testUser.incorrectPassword }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_3e1a892f10354ebaa91379fcb347d15f"}],"authentication":{},"metaSortKey":-1676085334454.25,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_wrk_6cdb1428addb45259cabbb76310bf6905d1baa8b","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063302147,"created":1676021277046,"url":"{{ base_url }}/auth/register","name":"Register a valid user","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"username\": \"{{ _.testUser.username }}\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"password\": \"{{ _.testUser.password }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{},"metaSortKey":-1676021277046,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_1cc37c3743394b3499e1ac9b850c2d86","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676295701031,"created":1676277978743,"url":"{{ base_url }}/auth/register","name":"Register a new user (invalid username)","description":"","method":"POST","body":{"mimeType":"application/json","text":"{\n  \"username\": \"this is an invalid username\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"password\": \"{{ _.testUser.password }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json","id":"pair_b79e4545503d41feb480640ce784be20"}],"authentication":{},"metaSortKey":-1675936048398.5,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_c6bec498c4f14a8dae5d64ca82518775","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676295832034,"created":1676295700688,"url":"{{ base_url }}/","name":"Unauthenticated protected endpoint","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"{% response 'body', 'req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0', 'b64::JC5hY2Nlc3NUb2tlbg==::46b', 'always', 60 %}","prefix":"Bearer","disabled":true},"metaSortKey":-1675914741199.125,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_00968cd52fcd462a9cfb54bf985efe4b","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676295741226,"created":1676295721766,"url":"{{ base_url }}/","name":"Invalid bearer on protected endpoint","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"this is probably invalid","prefix":"Bearer","disabled":false},"metaSortKey":-1675904087624.4375,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_99232d44ed2a4545b979fd28f993981f","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1677063335150,"created":1676293298167,"url":"{{ base_url }}/","name":"Test access key (from /auth/refresh)","description":"","method":"GET","body":{},"parameters":[],"headers":[],"authentication":{"type":"bearer","token":"{% response 'body', 'req_wrk_6cdb1428addb45259cabbb76310bf6905311e4d7', 'b64::JC5hY2Nlc3NUb2tlbg==::46b', 'always', 60 %}","prefix":"Bearer"},"metaSortKey":-1675893434049.75,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"req_4a172ed0866f48acb62a0b0b5a2fc909","parentId":"fld_wrk_6cdb1428addb45259cabbb76310bf69066a36e77","modified":1676470698246,"created":1676470665179,"url":"{{ _.base_url }}/auth/","name":"Delete test user","description":"","method":"DELETE","body":{"mimeType":"application/json","text":"{\n\t\"password\": \"{{ _.testUser.password }}\"\n}"},"parameters":[],"headers":[{"name":"Content-Type","value":"application/json"}],"authentication":{"type":"bearer","token":"{{ _.bearerToken }}","prefix":"Bearer"},"metaSortKey":-1675893433949.75,"isPrivate":false,"settingStoreCookies":true,"settingSendCookies":true,"settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingFollowRedirects":"global","_type":"request"},{"_id":"env_88ca1f630f933dfde80e9f4f429e7707a011c5fc","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130098,"created":1676021235535,"name":"Base environment","data":{"base_url":"{{ scheme }}://{{ host }}{{ base_path }}"},"dataPropertyOrder":null,"color":null,"isPrivate":false,"metaSortKey":1676021235535,"_type":"environment"},{"_id":"jar_88ca1f630f933dfde80e9f4f429e7707a011c5fc","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1676021235539,"created":1676021235539,"name":"Default Jar","cookies":[],"_type":"cookie_jar"},{"_id":"spc_58b6034baba14382ba52229ea59bb6a3","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1677063130106,"created":1676021235516,"fileName":"vizsgaremek.yaml","contents":"{\"openapi\":\"3.0.3\",\"info\":{\"title\":\"Mozi vizsgaremek\",\"description\":\"Karsza Levente, Klement Szabolcs, Papp Dávid\",\"version\":\"0.0.1\"},\"components\":{\"securitySchemes\":{\"bearer\":{\"type\":\"http\",\"scheme\":\"bearer\",\"bearerFormat\":\"JWT\"}},\"schemas\":{}},\"paths\":{\"/\":{\"get\":{\"summary\":\"Test endpoint\",\"tags\":[\"test\"],\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}}},\"/shift/\":{\"post\":{\"summary\":\"Create a new shift (requires manager role)\",\"tags\":[\"shift\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"from\":{\"format\":\"date-time\",\"type\":\"string\"},\"to\":{\"format\":\"date-time\",\"type\":\"string\"},\"requiredStaff\":{\"minimum\":1,\"type\":\"number\"}},\"required\":[\"from\",\"to\",\"requiredStaff\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"manager\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"from\":{\"format\":\"date-time\",\"type\":\"string\"},\"to\":{\"format\":\"date-time\",\"type\":\"string\"},\"requiredStaff\":{\"minimum\":1,\"type\":\"number\"}},\"required\":[\"from\",\"to\",\"requiredStaff\"]}}}}}}},\"/shift/{id}\":{\"delete\":{\"summary\":\"Delete specified shift (requires manager role)\",\"tags\":[\"shift\"],\"description\":\"Fails silently if given shift does not exist (returns 200)\",\"parameters\":[{\"schema\":{\"format\":\"uuid\",\"type\":\"string\"},\"in\":\"query\",\"name\":\"id\",\"required\":true}],\"security\":[{\"bearer\":[\"manager\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}}},\"/shift/filter\":{\"post\":{\"summary\":\"Get all shifts satisfying the given conditions\",\"tags\":[\"shift\"],\"description\":\"If the `to` field is ommitted, it will only return the shifts that start on the day specified in `from`\",\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"from\":{\"format\":\"date-time\",\"type\":\"string\"},\"to\":{\"format\":\"date-time\",\"type\":\"string\"}},\"required\":[\"from\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"employee\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}}},\"/auth/register\":{\"post\":{\"summary\":\"Register a new user\",\"tags\":[\"auth\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"username\":{\"minLength\":4,\"maxLength\":32,\"pattern\":\"^([A-Za-z0-9_-]){4,32}$\",\"type\":\"string\"},\"firstName\":{\"minLength\":1,\"type\":\"string\"},\"lastName\":{\"minLength\":1,\"type\":\"string\"},\"password\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"}},\"required\":[\"username\",\"firstName\",\"lastName\",\"password\"]}}},\"required\":true},\"responses\":{\"200\":{\"description\":\"Registration successful.\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Registration successful.\",\"type\":\"object\",\"properties\":{\"refreshToken\":{\"description\":\"The refresh token used to get a new access token\",\"type\":\"string\"},\"accessToken\":{\"description\":\"The bearer token to be passed in the Authorization header to the backend.\",\"type\":\"string\"}},\"required\":[\"refreshToken\",\"accessToken\"]}}}},\"400\":{\"description\":\"Username already taken.\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Username already taken.\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}}}}},\"/auth/login\":{\"post\":{\"summary\":\"Log in to an existing account\",\"tags\":[\"auth\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"username\":{\"minLength\":4,\"maxLength\":32,\"pattern\":\"^([A-Za-z0-9_-]){4,32}$\",\"type\":\"string\"},\"password\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"},\"totp\":{\"minLength\":6,\"maxLength\":6,\"pattern\":\"^[0-9]{6}$\",\"type\":\"string\"}},\"required\":[\"username\",\"password\"]}}},\"required\":true},\"responses\":{\"200\":{\"description\":\"Successful login\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Successful login\",\"type\":\"object\",\"properties\":{\"refreshToken\":{\"description\":\"The refresh token used to get a new access token\",\"type\":\"string\"},\"accessToken\":{\"description\":\"The bearer token to be passed in the Authorization header to the backend.\",\"type\":\"string\"}},\"required\":[\"refreshToken\",\"accessToken\"]}}}},\"401\":{\"description\":\"Invalid username or password\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Invalid username or password\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}}}}},\"/auth/refresh\":{\"post\":{\"summary\":\"Issue a new access token\",\"tags\":[\"auth\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"refreshToken\":{\"description\":\"The user's refresh token\",\"type\":\"string\"}},\"required\":[\"refreshToken\"]}}},\"required\":true},\"responses\":{\"200\":{\"description\":\"Issued new access token\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Issued new access token\",\"type\":\"object\",\"properties\":{\"accessToken\":{\"description\":\"The bearer token to be passed in the Authorization header to the backend.\",\"type\":\"string\"}},\"required\":[\"accessToken\"]}}}},\"401\":{\"description\":\"Invalid or expired refresh token\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Invalid or expired refresh token\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}},\"404\":{\"description\":\"User associated with refresh token not found\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"User associated with refresh token not found\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}}}}},\"/auth/password\":{\"put\":{\"summary\":\"Change password\",\"tags\":[\"auth\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"oldPassword\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"},\"newPassword\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"}},\"required\":[\"oldPassword\",\"newPassword\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Successfully changed password\"},\"403\":{\"description\":\"Old password is invalid\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"Old password is invalid\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}}}}},\"/auth/totp\":{\"post\":{\"summary\":\"Start TOTP onboarding\",\"tags\":[\"auth\",\"totp\"],\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\",\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"secret\":{\"description\":\"The TOTP shared secret\",\"type\":\"string\"},\"uri\":{\"description\":\"The otpauth URI required to generate a QR code\",\"type\":\"string\"}},\"required\":[\"secret\",\"uri\"]}}}},\"403\":{\"description\":\"TOTP is already enabled\",\"content\":{\"application/json\":{\"schema\":{\"description\":\"TOTP is already enabled\",\"type\":\"object\",\"properties\":{\"statusCode\":{\"description\":\"Identical to HTTP status code\",\"type\":\"number\"},\"error\":{\"description\":\"Short description of error (validator errors describe the status code instead)\",\"type\":\"string\"},\"message\":{\"description\":\"Longer description of error\",\"type\":\"string\"}},\"required\":[\"statusCode\",\"error\",\"message\"]}}}}}},\"put\":{\"summary\":\"Complete TOTP onboarding\",\"tags\":[\"auth\",\"totp\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"password\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"},\"totp\":{\"minLength\":6,\"maxLength\":6,\"pattern\":\"^[0-9]{6}$\",\"type\":\"string\"}},\"required\":[\"password\",\"totp\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}},\"delete\":{\"summary\":\"Disable TOTP two-factor authentication\",\"tags\":[\"auth\",\"totp\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"password\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"},\"totp\":{\"minLength\":6,\"maxLength\":6,\"pattern\":\"^[0-9]{6}$\",\"type\":\"string\"}},\"required\":[\"password\",\"totp\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}}},\"/auth/\":{\"delete\":{\"summary\":\"Delete authenticated (current) user\",\"tags\":[\"auth\"],\"requestBody\":{\"content\":{\"application/json\":{\"schema\":{\"type\":\"object\",\"properties\":{\"password\":{\"minLength\":8,\"maxLength\":256,\"pattern\":\"^[A-Za-z0-9!@#$%&^_W]{8,256}$\",\"type\":\"string\"},\"totp\":{\"minLength\":6,\"maxLength\":6,\"pattern\":\"^[0-9]{6}$\",\"type\":\"string\"}},\"required\":[\"password\"]}}},\"required\":true},\"security\":[{\"bearer\":[\"customer\"]}],\"responses\":{\"200\":{\"description\":\"Default Response\"}}}}},\"tags\":[{\"name\":\"auth\",\"description\":\"Authentication\"},{\"name\":\"totp\",\"description\":\"TOTP Second factor\"},{\"name\":\"shift\",\"description\":\"Work shift management\"},{\"name\":\"test\",\"description\":\"Testing\"}]}","contentType":"yaml","_type":"api_spec"},{"_id":"uts_7be76c2becab4814a7af88df0dc0d585","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1676022251268,"created":1676021336132,"name":"Authentication Suite","_type":"unit_test_suite"},{"_id":"uts_4cc5740bd71145d28c4d1194d849b8b2","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1676293715722,"created":1676293715722,"name":"TOTP Suite","_type":"unit_test_suite"},{"_id":"uts_b305dcd1256d4261bba9e778a20a307f","parentId":"wrk_6cdb1428addb45259cabbb76310bf690","modified":1676293720076,"created":1676293720076,"name":"Cleanup Suite","_type":"unit_test_suite"},{"_id":"env_env_88ca1f630f933dfde80e9f4f429e7707a011c5fc_sub","parentId":"env_88ca1f630f933dfde80e9f4f429e7707a011c5fc","modified":1676903618158,"created":1676021277065,"name":"OpenAPI env","data":{"scheme":"http","base_path":"","host":"localhost:8080","bearerToken":"{% response 'body', 'req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0', 'b64::JC5hY2Nlc3NUb2tlbg==::46b', 'always', 60 %}","testUser":{"username":"test_user","password":"test_password","incorrectPassword":"incorrect_password"},"invalidUser":{"username":"this_user_doesnt_exist","password":"whatever"}},"dataPropertyOrder":{"&":["scheme","base_path","host","bearerToken","testUser","invalidUser"],"&~|testUser":["username","password","incorrectPassword"],"&~|invalidUser":["username","password"]},"color":null,"isPrivate":false,"metaSortKey":1676021277065,"_type":"environment"},{"_id":"env_env_88ca1f630f933dfde80e9f4f429e7707a011c5fc_sub__9c17e047","parentId":"env_88ca1f630f933dfde80e9f4f429e7707a011c5fc","modified":1677063130095,"created":1676384987891,"name":"OpenAPI env example.com","data":{"scheme":"http","base_path":"","host":"example.com","bearerToken":"bearerToken"},"dataPropertyOrder":null,"color":null,"isPrivate":false,"metaSortKey":1676384987891,"_type":"environment"},{"_id":"env_8a75c91aada840e8b462b736d642e4d4","parentId":"env_88ca1f630f933dfde80e9f4f429e7707a011c5fc","modified":1676988756442,"created":1676969581641,"name":"OpenAPI env (Remote)","data":{"scheme":"https","base_path":"","host":"vr-api.leventea.hu","bearerToken":"{% response 'body', 'req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0', 'b64::JC5hY2Nlc3NUb2tlbg==::46b', 'always', 60 %}","testUser":{"username":"test_user","password":"test_password","incorrectPassword":"incorrect_password"},"invalidUser":{"username":"this_user_doesnt_exist","password":"whatever"}},"dataPropertyOrder":{"&":["scheme","base_path","host","bearerToken","testUser","invalidUser"],"&~|testUser":["username","password","incorrectPassword"],"&~|invalidUser":["username","password"]},"color":null,"isPrivate":false,"metaSortKey":1676203132478,"_type":"environment"},{"_id":"ut_64cef46a42a1431ba99fe58f562fba52","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676373479779,"created":1676021343787,"requestId":"req_wrk_6cdb1428addb45259cabbb76310bf6905d1baa8b","name":"Register a user","code":"const response1 = await insomnia.send();\nexpect(response1.status).to.equal(200);","_type":"unit_test"},{"_id":"ut_b294ca5787ca43f49d619bbcc1079da4","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676385250460,"created":1676022057903,"requestId":"req_wrk_6cdb1428addb45259cabbb76310bf6905d1baa8b","name":"Register duplicate username","code":"const resp = await insomnia.send();\n\nexpect(resp.status).to.equal(400);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.message).to.equal('Username is already taken')","_type":"unit_test"},{"_id":"ut_dbba7e46b0b44933a60481088c958e33","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676278093928,"created":1676277957312,"requestId":"req_wrk_6cdb1428addb45259cabbb76310bf6906fee21f0","name":"Log into valid account","code":"const response1 = await insomnia.send();\nexpect(response1.status).to.equal(200);","_type":"unit_test"},{"_id":"ut_e61a86a50524490f814ed22bc164e76f","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676278774870,"created":1676277963370,"requestId":"req_541b83633c234ba28aca1f7f2c49a273","name":"Log into invalid account (wrong username)","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(401);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.message).to.equal('Invalid username or password');","_type":"unit_test"},{"_id":"ut_fe72a99f9350432683d8fa212fb37bbd","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676373478686,"created":1676277969263,"requestId":"req_1cc37c3743394b3499e1ac9b850c2d86","name":"Register with invalid username","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(400);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.error).to.equal('Bad Request');\nexpect(body.message).to.include('body/username Expected string to match pattern');","_type":"unit_test"},{"_id":"ut_114c3fd1065042fcb746e0cb10888f7e","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676278787134,"created":1676278694661,"requestId":"req_ffc8bc2c57cd4dd7b57354e7473444fc","name":"Log into invalid account (wrong password)","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(401);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.message).to.equal('Invalid username or password');","_type":"unit_test"},{"_id":"ut_a317a14ae4e14591b251aac09cb921ff","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676295971780,"created":1676293077972,"requestId":"req_wrk_6cdb1428addb45259cabbb76310bf6905af80e6e","name":"Test access key (from login)","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(418);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.whoami).to.equal('teapot');","_type":"unit_test"},{"_id":"ut_cd8eda2d9d8b47489ecca3a1fabc10c4","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676293433785,"created":1676293417102,"requestId":"req_99232d44ed2a4545b979fd28f993981f","name":"Test access key (from re-issue)","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(418);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.whoami).to.equal('teapot');","_type":"unit_test"},{"_id":"ut_56a4d419c9964d41b3f33788465e06b6","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676385099813,"created":1676295681231,"requestId":"req_c6bec498c4f14a8dae5d64ca82518775","name":"Throw error when unauthenticated","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(400);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.message).to.equal('Authorizaion header not found in request')","_type":"unit_test"},{"_id":"ut_cac2d6bbdf1e4e3baf9fb3ca5ec57819","parentId":"uts_7be76c2becab4814a7af88df0dc0d585","modified":1676385095796,"created":1676295844969,"requestId":"req_00968cd52fcd462a9cfb54bf985efe4b","name":"Throw error when bearer is invalid","code":"const resp = await insomnia.send();\nexpect(resp.status).to.equal(401);\n\nconst body = JSON.parse(resp.data);\n\nexpect(body.message).to.equal('Invalid access token');","_type":"unit_test"}]}